 <!DOCTYPE html>
 <!--References: http://www.javascript-coder.com/javascript-form/javascript-get-all-form-objects.phtml-->
<!-- saved from url=(0016)http://localhost -->
<html>
 <head>
  <meta http-equiv="pragma" content="no-cache" />
  <!--<meta http-equiv="expires" content="Fri, 03 Feb 2017 12:00:00 EST"/>-->
  <meta charset="utf-8">
  <link type="text/css" rel="stylesheet"  href="./style.css" />
  <!--<script src='data.js' type="text/javascript"></script>-->
  <script type="text/javascript">
  function checkShiftEnter(evnt) {
    if (evnt.keyCode == 13 && evnt.shiftKey) {
      evnt.target.parentElement.submit()//find the textarea from event, then the parent form, and submit it
      return false
      }
  }
  var count=0;//number of commands entered
  var number=0;//position of input form and output running from top to bottom of page, i.e. corresponds to document.forms[i] index i
  function newPromptStringOpen(n) {
    return '<div class=io id=0><div id='+n+' class=input><form class=cli id='+n+' name=jsForm'+n+' action=javascript:ok(this)><textarea id="jsTA'+n+'" onkeypress="return checkShiftEnter(event)" rows="5" cols="100"></div>'}
  function newPromptStringClose(n){
    return '</textarea><input name=Eval'+n+'+ onclick=javascript:evalJS(this.form,this.form.elements[0].value) type="submit" value="Eval JS"/></form><div id='+n+' class=output></div></div>'}
  function appendNewPrompt(form,prefill='') {
    form.insertAdjacentHTML('afterend',newFormStringOpen(count)+prefill+newFormStringClose(count))
  }
  function getCurrentOutput(form) {
    return form.parentElement.nextSibling
  }
  function svg(form) {
    //return getCurrentOutput(form).appendChild()
  }
  function evalJS(form,t) {//Evaluate form javascript: form is the form, t is textarea text (javascript)
    console.log("form.parentElement.nextSibling.className: "+form.parentElement.nextSibling.className)//div classname=output
    //appendNewForm(t)
    var output = getCurrentOutput(form)
    eval(t)
    count=count+1
  }
  function appendHTML(el,s,pos='afterend') {
    //TD: add a try catch to check el is an HTML element, s is HTML, and pos is one of four possible positioning values
    el.insertAdjacentHTML(pos,s)
  }
  function appendNewForm(el) {

  }
  function ok(t) {
    console.log('ok: '+t)
  }
  </script>
  <style id='CSS'></style>
 </head>
 <body>
  <div id='body_start'></div>
  <div class=io id=0><div id=0 name=input1 class=input><form class='cli' id=0 name="jsForm" action=javascript:ok(this)><textarea name="jsTA" id="jsTA0" onkeypress="return checkShiftEnter(event)" rows="5" cols="100">
   o=output//reference to output div below this form
   </textarea>
   <input name="Submit" onclick=javascript:evalJS(this.form,this.form.elements[0].value) type="submit" value="Eval JS"/><input name="ClearOutput" onclick=javascript:this.form.parentElement.nextSibling.innerHTML='' type="submit" value="Clear Output"/></form></div><div id=0 class=output><div id=0 class=output></div></div>
  </body>
</html>

<!--
o=output
o.insertAdjacentHTML('afterbegin','<svg class="svg" name="svgn" id=s'+count+' width="600px" height="400px"></svg>')
s=o.childNodes[0]   
   var data = [];
   var i;   for (i = 0; i < 100; i++) {
   data.push({x: Math.random() * 600, y: Math.random() * 400}); // random data points
   }
   for (i = 0; i < 100; i++) {
s.innerHTML=s.innerHTML+'<circle cx='+data[i].x+' cy='+data[i].y+' r=2></circle>'  
}
-->
